{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'pages/css/mypost.css' %}">
<div class="mypost-page-wrapper">
    <div class="mypost-container">
        
        <header class="mypost-header">
            <h2 class="page-title">My Posts</h2>
            {% if can_create %}
            <a href="{% url 'posts:createposts' %}" class="btn btn-add">
                + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà
            </a>
            {% else %}
            <button class="btn btn-disabled" disabled title="‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏≠‡∏µ‡πÄ‡∏°‡∏• @dome.tu.ac.th">
                + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤)
            </button>
            {% endif %}
        </header>

        {% if mypost_items %}
        <div class="post-grid">
            {% for item in mypost_items %}
            <article class="post-card">
                <div class="post-image-box">
                    <img src="{{ item.image_url }}" alt="{{ item.title }}" class="post-image">
                </div>

                <div class="post-content">
                    <h3 class="post-title">{{ item.title }}</h3>
                    <p class="post-price">{{ item.price_detail }}</p>

                    <div class="post-meta">
                        <span class="rating-badge">
                            ‚òÖ {{ item.avg_rating|floatformat:1 }}
                        </span>
                        <span class="review-count">({{ item.count_reviews }} ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß)</span>
                    </div>

                    <div class="post-actions">
                        <a href="{% url 'posts:detail_post' post_id=item.id %}" class="btn-action btn-view">
                            ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                        </a>

                        <a href="{% url 'posts:delete_post' post_id=item.id %}" class="btn-action btn-delete"
                            onclick="return confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ô‡∏µ‡πâ? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ');">
                            ‡∏•‡∏ö‡πÇ‡∏û‡∏™‡∏ï‡πå
                        </a>
                    </div>
                </div>
            </article>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <div class="empty-icon">üìÇ</div>
            <h4>‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ</h4>
            <p>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}